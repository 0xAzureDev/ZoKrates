Fix stack overflow when testing equality on large arrays